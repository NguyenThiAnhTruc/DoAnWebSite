<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Đổi mật khẩu</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
<style>
  .zoom { opacity:0; transform:scale(.96); }
  .zoom.show { opacity:1; transform:scale(1); transition:.2s ease; }
</style>
</head>
<body class="bg-gray-50">
<main class="min-h-screen flex items-center justify-center p-4">
  <div class="bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden zoom" id="card">
    <div class="bg-gradient-to-r from-blue-500 to-purple-600 px-6 py-4 text-white flex items-center justify-between">
      <div class="flex items-center space-x-3">
        <div class="w-10 h-10 bg-white/20 rounded-full flex items-center justify-center">
          <i data-lucide="shield" class="w-5 h-5"></i>
        </div>
        <h2 class="text-xl font-semibold">Đổi mật khẩu</h2>
      </div>
    </div>

    <form id="form" class="p-6 space-y-6">
      <!-- current -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Mật khẩu hiện tại</label>
        <div class="relative">
          <i data-lucide="lock" class="w-5 h-5 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2"></i>
          <input id="cur" type="password" placeholder="Nhập mật khẩu hiện tại"
                 class="w-full pl-10 pr-12 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500"/>
          <button type="button" data-eye="cur" class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600">
            <i data-lucide="eye" class="w-5 h-5"></i>
          </button>
        </div>
      </div>
      <!-- new -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Mật khẩu mới</label>
        <div class="relative">
          <i data-lucide="lock" class="w-5 h-5 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2"></i>
          <input id="new" type="password" placeholder="Nhập mật khẩu mới"
                 class="w-full pl-10 pr-12 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500"/>
          <button type="button" data-eye="new" class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600">
            <i data-lucide="eye" class="w-5 h-5"></i>
          </button>
        </div>
      </div>
      <!-- confirm -->
      <div>
        <label class="block text-sm font-medium text-gray-700 mb-2">Xác nhận mật khẩu mới</label>
        <div class="relative">
          <i data-lucide="lock" class="w-5 h-5 text-gray-400 absolute left-3 top-1/2 -translate-y-1/2"></i>
          <input id="new2" type="password" placeholder="Nhập lại mật khẩu mới"
                 class="w-full pl-10 pr-12 py-3 border rounded-xl focus:ring-2 focus:ring-blue-500"/>
          <button type="button" data-eye="new2" class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600">
            <i data-lucide="eye" class="w-5 h-5"></i>
          </button>
        </div>
      </div>

      <!-- yêu cầu -->
      <div class="bg-gray-50 rounded-lg p-4">
        <h4 class="text-sm font-medium text-gray-700 mb-2">Yêu cầu mật khẩu:</h4>
        <ul class="text-xs text-gray-600 space-y-1">
          <li id="ruleLen" class="flex items-center"><span class="w-2 h-2 rounded-full bg-gray-300 mr-2"></span>Ít nhất 6 ký tự</li>
          <li id="ruleMatch" class="flex items-center"><span class="w-2 h-2 rounded-full bg-gray-300 mr-2"></span>Mật khẩu khớp nhau</li>
        </ul>
      </div>

      <div class="flex space-x-3 pt-2">
        <a href="UserProfile.html" class="flex-1 px-4 py-3 border-2 border-gray-300 text-gray-700 rounded-xl text-center">Hủy</a>
        <button type="submit" class="flex-1 bg-gradient-to-r from-blue-500 to-purple-600 text-white px-4 py-3 rounded-xl font-semibold hover:shadow-lg">
          Đổi mật khẩu
        </button>
      </div>
    </form>
  </div>
</main>

<script>
  const cur = document.getElementById('cur');
  const neu = document.getElementById('new');
  const neu2 = document.getElementById('new2');
  const form = document.getElementById('form');

  // Eye toggle
  document.querySelectorAll('[data-eye]').forEach(btn=>{
    btn.onclick=()=>{
      const id = btn.getAttribute('data-eye');
      const inp = document.getElementById(id);
      const isText = inp.type==='text'; inp.type=isText?'password':'text';
      const icon = btn.querySelector('i'); icon.setAttribute('data-lucide', isText?'eye':'eye-off'); lucide.createIcons();
    };
  });

  function refreshRules(){
    const okLen = (neu.value||'').length>=6;
    const okMatch = neu.value && neu.value === neu2.value;
    const r1 = document.getElementById('ruleLen').firstElementChild;
    const r2 = document.getElementById('ruleMatch').firstElementChild;
    r1.className = 'w-2 h-2 rounded-full mr-2 ' + (okLen?'bg-green-500':'bg-gray-300');
    r2.className = 'w-2 h-2 rounded-full mr-2 ' + (okMatch?'bg-green-500':'bg-gray-300');
  }
  neu.oninput=refreshRules; neu2.oninput=refreshRules;

  form.onsubmit=(e)=>{
    e.preventDefault();
    if(!cur.value || !neu.value || !neu2.value) return alert('Vui lòng điền đầy đủ thông tin');
    if(neu.value!==neu2.value) return alert('Mật khẩu mới không khớp');
    if(neu.value.length<6) return alert('Mật khẩu mới phải có ít nhất 6 ký tự');
    // demo kiểm tra current password = 123456
    if(cur.value!=='123456') return alert('Mật khẩu hiện tại không đúng');
    alert('Đổi mật khẩu thành công!');
    window.location.href='user-profile.html';
  };

  requestAnimationFrame(()=>document.getElementById('card').classList.add('show'));
  lucide.createIcons();
</script>
</body>
</html>
