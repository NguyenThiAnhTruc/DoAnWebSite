<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>🌍 Demo Language System</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-blue-50 to-purple-50 min-h-screen p-8">
  
  <div class="max-w-4xl mx-auto">
    
    <!-- Header -->
    <div class="bg-white rounded-2xl shadow-xl p-8 mb-6">
      <h1 class="text-4xl font-bold text-center mb-2" data-translate="common.testTitle">
        🌍 Test Ghi Nhớ Ngôn Ngữ
      </h1>
      <p class="text-center text-gray-600" data-translate="common.testDesc">
        Thử đổi ngôn ngữ và reload trang để xem hiệu quả
      </p>
    </div>

    <!-- Language Info Card -->
    <div class="bg-white rounded-2xl shadow-xl p-8 mb-6">
      <h2 class="text-2xl font-bold mb-6 flex items-center">
        <span class="text-3xl mr-3">📊</span>
        Thông tin ngôn ngữ
      </h2>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
        <div class="bg-blue-50 rounded-lg p-4">
          <div class="text-sm text-blue-600 font-semibold mb-1" data-translate="common.currentLanguage">
            Ngôn ngữ hiện tại:
          </div>
          <div id="currentLangDisplay" class="text-2xl font-bold text-blue-900">
            -
          </div>
        </div>
        
        <div class="bg-green-50 rounded-lg p-4">
          <div class="text-sm text-green-600 font-semibold mb-1" data-translate="common.savedLanguage">
            Ngôn ngữ đã lưu:
          </div>
          <div id="savedLangDisplay" class="text-2xl font-bold text-green-900">
            -
          </div>
        </div>
      </div>

      <!-- Language Selector -->
      <div class="flex gap-4 justify-center">
        <button 
          onclick="switchTo('vi')"
          class="px-8 py-4 bg-gradient-to-r from-red-500 to-yellow-500 text-white rounded-xl font-bold text-lg hover:shadow-lg transition-all flex items-center gap-2">
          <span class="text-2xl">🇻🇳</span>
          Tiếng Việt
        </button>
        
        <button 
          onclick="switchTo('en')"
          class="px-8 py-4 bg-gradient-to-r from-blue-600 to-red-600 text-white rounded-xl font-bold text-lg hover:shadow-lg transition-all flex items-center gap-2">
          <span class="text-2xl">🇬🇧</span>
          English
        </button>
      </div>
    </div>

    <!-- Demo Elements Card -->
    <div class="bg-white rounded-2xl shadow-xl p-8 mb-6">
      <h2 class="text-2xl font-bold mb-6 flex items-center">
        <span class="text-3xl mr-3">🎨</span>
        <span data-translate="common.staticText">Text Tĩnh</span>
      </h2>
      
      <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
        <div class="text-center p-4 bg-gray-50 rounded-lg">
          <div class="text-3xl mb-2">💾</div>
          <div class="font-semibold" data-translate="common.save">Lưu</div>
        </div>
        <div class="text-center p-4 bg-gray-50 rounded-lg">
          <div class="text-3xl mb-2">❌</div>
          <div class="font-semibold" data-translate="common.cancel">Hủy</div>
        </div>
        <div class="text-center p-4 bg-gray-50 rounded-lg">
          <div class="text-3xl mb-2">🗑️</div>
          <div class="font-semibold" data-translate="common.delete">Xóa</div>
        </div>
        <div class="text-center p-4 bg-gray-50 rounded-lg">
          <div class="text-3xl mb-2">✏️</div>
          <div class="font-semibold" data-translate="common.edit">Sửa</div>
        </div>
      </div>

      <h3 class="text-xl font-bold mb-4" data-translate="common.dynamicStatus">Trạng thái Động</h3>
      <div class="flex flex-wrap gap-3">
        <span class="px-4 py-2 bg-yellow-100 text-yellow-800 rounded-full font-semibold" data-translate="common.pending">Đang chờ</span>
        <span class="px-4 py-2 bg-green-100 text-green-800 rounded-full font-semibold" data-translate="common.approved">Đã duyệt</span>
        <span class="px-4 py-2 bg-red-100 text-red-800 rounded-full font-semibold" data-translate="common.rejected">Từ chối</span>
      </div>
    </div>

    <!-- Actions Card -->
    <div class="bg-white rounded-2xl shadow-xl p-8 mb-6">
      <h2 class="text-2xl font-bold mb-6 flex items-center">
        <span class="text-3xl mr-3">⚡</span>
        <span data-translate="common.actions">Hành động</span>
      </h2>
      
      <div class="flex flex-wrap gap-4">
        <button 
          onclick="location.reload()"
          class="px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition-colors flex items-center gap-2">
          <span>🔄</span>
          <span data-translate="common.reloadPage">Reload Trang</span>
        </button>
        
        <button 
          onclick="clearStorage()"
          class="px-6 py-3 bg-red-600 text-white rounded-lg font-semibold hover:bg-red-700 transition-colors flex items-center gap-2">
          <span>🗑️</span>
          <span data-translate="common.clearStorage">Xóa Storage</span>
        </button>
        
        <button 
          onclick="showCurrentLang()"
          class="px-6 py-3 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 transition-colors flex items-center gap-2">
          <span>💬</span>
          <span data-translate="common.showAlert">Hiện Alert</span>
        </button>
      </div>
    </div>

    <!-- Instructions Card -->
    <div class="bg-gradient-to-r from-purple-100 to-pink-100 rounded-2xl p-8">
      <h2 class="text-2xl font-bold mb-4 flex items-center text-purple-900">
        <span class="text-3xl mr-3">📝</span>
        <span data-translate="common.instructions">Hướng dẫn test:</span>
      </h2>
      
      <ol class="space-y-3 text-purple-900">
        <li class="flex items-start">
          <span class="font-bold mr-2">1.</span>
          <span data-translate="common.step1">Chọn ngôn ngữ từ dropdown phía trên</span>
        </li>
        <li class="flex items-start">
          <span class="font-bold mr-2">2.</span>
          <span data-translate="common.step2">Xem tất cả text thay đổi NGAY LẬP TỨC</span>
        </li>
        <li class="flex items-start">
          <span class="font-bold mr-2">3.</span>
          <span data-translate="common.step3">Click "Reload Trang" hoặc nhấn F5</span>
        </li>
        <li class="flex items-start">
          <span class="font-bold mr-2">4.</span>
          <span data-translate="common.step4">Trang vẫn giữ nguyên ngôn ngữ đã chọn! ✅</span>
        </li>
      </ol>

      <div class="mt-6 pt-6 border-t border-purple-300">
        <a 
          href="/EventList.html"
          class="inline-flex items-center gap-2 px-6 py-3 bg-purple-600 text-white rounded-lg font-semibold hover:bg-purple-700 transition-colors">
          <span>←</span>
          <span data-translate="common.backToDashboard">Quay lại Dashboard</span>
        </a>
      </div>
    </div>

  </div>

  <!-- Load Language Service -->
  <script src="/js/language.js"></script>

  <script>
    // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
    // 🌍 DEMO LANGUAGE SWITCH
    // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

    /**
     * Switch language
     */
    function switchTo(lang) {
      console.log(`🔄 Switching to ${lang}...`);
      
      if (window.LanguageService) {
        const success = window.LanguageService.changeLanguage(lang);
        
        if (success) {
          updateDisplay();
          showToast(lang);
          console.log(`✅ Switched to ${lang}`);
        } else {
          console.error(`❌ Failed to switch to ${lang}`);
        }
      } else {
        console.error('❌ LanguageService not found!');
      }
    }

    /**
     * Update display info
     */
    function updateDisplay() {
      const currentLang = window.LanguageService?.getCurrentLanguage() || 'unknown';
      const savedLang = localStorage.getItem('language') || 'none';
      
      const langNames = {
        vi: 'Tiếng Việt 🇻🇳',
        en: 'English 🇬🇧',
        unknown: 'Unknown',
        none: 'Not saved'
      };
      
      document.getElementById('currentLangDisplay').textContent = langNames[currentLang] || currentLang;
      document.getElementById('savedLangDisplay').textContent = langNames[savedLang] || savedLang;
    }

    /**
     * Show toast notification
     */
    function showToast(lang) {
      const messages = {
        vi: '✅ Đã chuyển sang Tiếng Việt',
        en: '✅ Switched to English'
      };
      
      const toast = document.createElement('div');
      toast.className = 'fixed top-4 right-4 bg-green-600 text-white px-6 py-3 rounded-lg shadow-xl z-50';
      toast.style.animation = 'slideIn 0.3s ease-out';
      toast.textContent = messages[lang] || `Switched to ${lang}`;
      document.body.appendChild(toast);
      
      setTimeout(() => {
        toast.style.animation = 'slideOut 0.3s ease-out';
        setTimeout(() => toast.remove(), 300);
      }, 3000);
    }

    /**
     * Clear localStorage
     */
    function clearStorage() {
      localStorage.removeItem('language');
      alert('✅ Storage cleared! Reload page to see default language.');
      updateDisplay();
    }

    /**
     * Show current language in alert
     */
    function showCurrentLang() {
      const lang = localStorage.getItem('language') || 'vi (default)';
      const messages = {
        vi: 'Ngôn ngữ hiện tại: Tiếng Việt 🇻🇳',
        en: 'Current language: English 🇬🇧'
      };
      alert(messages[lang] || `Language: ${lang}`);
    }

    /**
     * Initialize page
     */
    function init() {
      console.log('🎬 Initializing demo page...');
      updateDisplay();
      
      // Listen for language changes
      window.addEventListener('language-changed', (e) => {
        console.log('🔔 Language changed:', e.detail.language);
        updateDisplay();
      });
      
      console.log('✅ Demo page initialized');
    }

    // Auto-init
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', init);
    } else {
      init();
    }

    // Update display every second (for demo purposes)
    setInterval(updateDisplay, 1000);
  </script>

  <style>
    @keyframes slideIn {
      from { opacity: 0; transform: translateX(100px); }
      to { opacity: 1; transform: translateX(0); }
    }
    @keyframes slideOut {
      from { opacity: 1; transform: translateX(0); }
      to { opacity: 0; transform: translateX(100px); }
    }
  </style>

</body>
</html>
